{% extends "base.html" %}
{% block title %}Calendar{% endblock %}
{% block content %}
<div class="container mt-4">
    <div class="card">
        <div class="card-header bg-primary text-white">
            <h2><i class="fas fa-calendar"></i> Event Calendar</h2>
        </div>
        <div class="card-body">
            <div id="calendar"></div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<link href="{{ url_for('static', filename='plugins/fullcalendar/core-4.3.1/main.min.css') }}" rel='stylesheet' />
<link href="{{ url_for('static', filename='plugins/fullcalendar/daygrid-4.3.0/main.min.css') }}" rel='stylesheet' />
<script src="{{ url_for('static', filename='plugins/fullcalendar/core-4.3.1/main.min.js') }}"></script>
<script src="{{ url_for('static', filename='plugins/fullcalendar/daygrid-4.3.0/main.min.js') }}"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
        plugins: ['dayGrid'],
        defaultView: 'dayGridMonth',
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,dayGridWeek,dayGridDay'
        },
        events: [
            {% for meeting in meetings %}
            {
                title: '{{ meeting.title }}',
                start: '{{ meeting.date.strftime("%Y-%m-%d %H:%M:%S") }}',
                description: '{{ meeting.description }}',
                location: '{{ meeting.location }}'
            }{% if not loop.last %},{% endif %}
            {% endfor %}
        ]
    });
    calendar.render();
});
</script>
{% endblock %}